import{AssertNotNull}from"/static/engine/assertions/AssertNotNull.js";import{Once}from"/static/engine/code_tools/Once.js";import{Random}from"/static/engine/code_tools/misc/Random.js";import{RunOnce}from"/static/engine/code_tools/on/RunOnce.js";import{Call}from"/static/engine/code_tools/tools/Call.js";import{LocalObjects}from"/static/engine/objects/LocalObjects.js";import{Piss}from"/static/game/levels/main_level/Piss.js";export class PissQuest{constructor(s){AssertNotNull(s,"argument deliveryDrone in "+this.constructor.name+".js should not be null"),this.deliveryDrone=s,this.cleanedPisses=0,s.compass.clear(),this.localObjects=new LocalObjects(Random.positions(0,200,-200,3e3,20).map(e=>{e.width=200,e.height=200,s.compass.add(e,"yellow");const t=new Piss(s,e);return t.onFinish=()=>{this.cleanedPisses+=1,s.compass.remove(e,"yellow")},t}))}update(){RunOnce(20==this.cleanedPisses,()=>{Call(this.onFinish)}),this.localObjects.update()}draw(s,e){this.localObjects.draw(s,e)}}