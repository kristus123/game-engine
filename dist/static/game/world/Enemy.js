import{AssertNotNull}from"/static/engine/assertions/AssertNotNull.js";import{InfiniteListLooper}from"/static/engine/code_tools/InfiniteListLooper.js";import{ListLooper}from"/static/engine/code_tools/ListLooper.js";import{a}from"/static/engine/code_tools/a.js";import{Picture}from"/static/engine/code_tools/misc/Picture.js";import{Loop}from"/static/engine/core/Loop.js";import{ForcePush}from"/static/engine/core/physics/ForcePush.js";import{Push}from"/static/engine/core/physics/Push.js";import{Sprite}from"/static/engine/graphics/sprite/Sprite.js";import{Hp}from"/static/engine/hp/Hp.js";import{StraightPath}from"/static/engine/mechanics/StraightPath.js";import{DynamicGameObject}from"/static/engine/objects/DynamicGameObject.js";import{LocalObjects}from"/static/engine/objects/LocalObjects.js";import{Registry}from"/static/engine/objects/Registry.js";import{Position}from"/static/engine/position/Position.js";import{D}from"/static/game/world/D.js";import{Init}from"/static/game/world/Init.js";export class Enemy extends DynamicGameObject{constructor(t){super(t,1e3,10),AssertNotNull(t,"argument position in "+this.constructor.name+".js should not be null"),this.position=t,this.position.width=100,this.position.height=100,this.localObjects=new LocalObjects([new Picture(this.position,"/static/assets/bad_ninja.png"),Init(this,{hp:new Hp(this,100,100),straightPath:new StraightPath(this,Registry.player)})]),this.points=new InfiniteListLooper([new Position(600,200),new Position(800,-300)])}update(){this.straightPath.clear&&this.within(300,Registry.player)?ForcePush(this).towards(Registry.player,20):this.points.goThrough(t=>{ForcePush(this).towards(t,10),this.within(100,t)&&this.points.next()}),this.localObjects.update()}markBlinded(){this.blinded=!0,setTimeout(()=>{this.blinded=!1},2e3)}kill(){this.handledBy.add(new class{constructor(t){this.sprite=new TriggerSprite(t.offset(-200,-200,500,500),"/static/assets/kill_blood_animation_32x32.png",[{x:1,y:0},{x:2,y:0},{x:3,y:0},{x:4,y:0},{x:5,y:0}],50),this.sprite.play()}update(){this.sprite.pause&&this.removeFromLoop()}draw(t,i){this.sprite.draw(t,i)}}(this.position)),this.removeFromLoop()}draw(t,i){this.localObjects.draw(t,i),this.blinded&&t.text(this.position.offset(0,-100),"ðŸ«£")}}