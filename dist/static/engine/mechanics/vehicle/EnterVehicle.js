import{AssertNotNull}from"/static/engine/assertions/AssertNotNull.js";import{a}from"/static/engine/code_tools/a.js";import{Call}from"/static/engine/code_tools/tools/Call.js";import{Controller}from"/static/engine/controller/Controller.js";import{KeyDown}from"/static/engine/controller/keyboard/KeyDown.js";import{Camera}from"/static/engine/core/camera/Camera.js";import{Collision}from"/static/engine/core/physics/Collision.js";export class EnterVehicle{constructor(e,t){AssertNotNull(e,"argument vehicle in "+this.constructor.name+".js should not be null"),AssertNotNull(t,"argument player in "+this.constructor.name+".js should not be null"),this.vehicle=e,this.player=t,this.entered=!1,KeyDown("e",()=>{this.entered?(this.entered=!1,Call(this.onExit),Controller.control(t),Camera.follow(t),Camera.zoom=1,this.player.x=e.x,this.player.y=e.y):Collision.between(t,e)&&(this.entered=!0,Call(this.onEnter),Controller.control(e),Camera.follow(e))})}update(){this.entered&&(this.player.x=this.vehicle.x+450,this.player.y=this.vehicle.y)}draw(e,t){!this.entered&&Collision.between(this.player,this.vehicle)&&e.text(this.vehicle.position,"E to enter")}}