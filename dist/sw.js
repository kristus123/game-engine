const CACHE_NAME = "60f5826c-1651-46f3-862e-660a3b1316cb"

self.addEventListener('install', event => {
	event.waitUntil(
		caches.open(CACHE_NAME).then(async cache => {
			for (const url of ['/', ...["/static/assets/aseprite/ally.aseprite","/static/assets/aseprite/enemy.aseprite","/static/assets/aseprite/flower.aseprite","/static/assets/aseprite/goat.aseprite","/static/assets/aseprite/grass.aseprite","/static/assets/aseprite/grassTile.aseprite","/static/assets/aseprite/hamtaro.aseprite","/static/assets/aseprite/house.aseprite","/static/assets/aseprite/icon.aseprite","/static/assets/aseprite/new_farmer.aseprite","/static/assets/aseprite/new_world.aseprite","/static/assets/aseprite/new_world_tilemaps.json","/static/assets/aseprite/p2.aseprite","/static/assets/aseprite/player/player.aseprite","/static/assets/aseprite/player/viking.aseprite","/static/assets/aseprite/pokemonCity.aseprite","/static/assets/aseprite/sign.aseprite","/static/assets/aseprite/sky.aseprite","/static/assets/aseprite/test.aseprite","/static/assets/aseprite/tractor.aseprite","/static/assets/aseprite/turret.aseprite","/static/assets/aseprite/waterTile.aseprite","/static/assets/aseprite/wheat.aseprite","/static/assets/aseprite/world.aseprite","/static/assets/aseprite/world_tilemaps.json","/static/assets/drag_cursor.svg","/static/assets/legacy/Chicken_Sprite_Sheet_Dark_Brown.png","/static/assets/legacy/Chicken_Sprite_Sheet_Light_Brown.png","/static/assets/legacy/art/bar.jpg","/static/assets/legacy/art/bar_2.jpg","/static/assets/legacy/art/cafe_2.jpg","/static/assets/legacy/art/cowboy.jpg","/static/assets/legacy/art/cute.jpg","/static/assets/legacy/art/cute_girl.jpg","/static/assets/legacy/art/girl.jpg","/static/assets/legacy/art/office.jpg","/static/assets/legacy/art/sexy.jpg","/static/assets/legacy/art/strip.jpg","/static/assets/legacy/art/woman.jpg","/static/assets/legacy/bad_ninja.png","/static/assets/legacy/bar_1.png","/static/assets/legacy/bar_2.png","/static/assets/legacy/bil.png","/static/assets/legacy/blob_57x32.png","/static/assets/legacy/blood_pack/VFX Blood Batch 1.ase","/static/assets/legacy/blood_pack/VFX Blood Batch 1_1.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_2.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_3.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_4.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_5.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_6.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_7.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_8.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_9.gif","/static/assets/legacy/blood_pack/VFX Blood Batch 1_SpriteSheetColumns.png","/static/assets/legacy/blood_pack/VFX Blood Batch 1_SpriteSheetPacked.png","/static/assets/legacy/blood_pack/VFX Blood Batch 1_SpriteSheetRows.png","/static/assets/legacy/box.png","/static/assets/legacy/bush.png","/static/assets/legacy/cargo_flames.png","/static/assets/legacy/cargo_ship.png","/static/assets/legacy/chicken_cage_512x512.png","/static/assets/legacy/cloud.png","/static/assets/legacy/cloud_2.png","/static/assets/legacy/dragon_room.png","/static/assets/legacy/explosion_32x32.png","/static/assets/legacy/farm_512x320.png","/static/assets/legacy/farm_512x512.png","/static/assets/legacy/god_48x56.json","/static/assets/legacy/god_48x56.png","/static/assets/legacy/grass.png","/static/assets/legacy/house.png","/static/assets/legacy/house_with_door_open_animation_32x32.png","/static/assets/legacy/houses.png","/static/assets/legacy/intro.png","/static/assets/legacy/kid.png","/static/assets/legacy/kill_blood_animation_32x32.png","/static/assets/legacy/kill_splash.png","/static/assets/legacy/lift_1.png","/static/assets/legacy/lift_2.png","/static/assets/legacy/logo.png","/static/assets/legacy/new_player.png","/static/assets/legacy/new_player_32x32.png","/static/assets/legacy/old_man.png","/static/assets/legacy/penguin.png","/static/assets/legacy/petter.png","/static/assets/legacy/planets/dryhotplanet32x32.png","/static/assets/legacy/planets/dryvenuslikeplane32x32t.png","/static/assets/legacy/planets/exoplanet32x32.png","/static/assets/legacy/planets/iceplanet32x32.png","/static/assets/legacy/planets/moon27x26.png","/static/assets/legacy/planets/neptunlikeplanet32x32.png","/static/assets/legacy/planets/org_iceplanet.png","/static/assets/legacy/planets/org_lava_planet.png","/static/assets/legacy/planets/org_machine_world.png","/static/assets/legacy/planets/org_shattered_planet.png","/static/assets/legacy/planets/sphereplanet70x70.png","/static/assets/legacy/planets/sun.png","/static/assets/legacy/player.png","/static/assets/legacy/poison_cloud/Poison Cloud1.png","/static/assets/legacy/poison_cloud/Poison Cloud10.png","/static/assets/legacy/poison_cloud/Poison Cloud11.png","/static/assets/legacy/poison_cloud/Poison Cloud12.png","/static/assets/legacy/poison_cloud/Poison Cloud13.png","/static/assets/legacy/poison_cloud/Poison Cloud14.png","/static/assets/legacy/poison_cloud/Poison Cloud15.png","/static/assets/legacy/poison_cloud/Poison Cloud16.png","/static/assets/legacy/poison_cloud/Poison Cloud17.png","/static/assets/legacy/poison_cloud/Poison Cloud18.png","/static/assets/legacy/poison_cloud/Poison Cloud19.png","/static/assets/legacy/poison_cloud/Poison Cloud2.png","/static/assets/legacy/poison_cloud/Poison Cloud3.png","/static/assets/legacy/poison_cloud/Poison Cloud4.png","/static/assets/legacy/poison_cloud/Poison Cloud5.png","/static/assets/legacy/poison_cloud/Poison Cloud6.png","/static/assets/legacy/poison_cloud/Poison Cloud7.png","/static/assets/legacy/poison_cloud/Poison Cloud8.png","/static/assets/legacy/poison_cloud/Poison Cloud9.png","/static/assets/legacy/pretty_trees.png","/static/assets/legacy/shopkeeper.png","/static/assets/legacy/small_house.png","/static/assets/legacy/smoke/Smoke1.png","/static/assets/legacy/smoke/Smoke10.png","/static/assets/legacy/smoke/Smoke11.png","/static/assets/legacy/smoke/Smoke12.png","/static/assets/legacy/smoke/Smoke13.png","/static/assets/legacy/smoke/Smoke14.png","/static/assets/legacy/smoke/Smoke15.png","/static/assets/legacy/smoke/Smoke16.png","/static/assets/legacy/smoke/Smoke17.png","/static/assets/legacy/smoke/Smoke18.png","/static/assets/legacy/smoke/Smoke19.png","/static/assets/legacy/smoke/Smoke2.png","/static/assets/legacy/smoke/Smoke3.png","/static/assets/legacy/smoke/Smoke4.png","/static/assets/legacy/smoke/Smoke5.png","/static/assets/legacy/smoke/Smoke6.png","/static/assets/legacy/smoke/Smoke7.png","/static/assets/legacy/smoke/Smoke8.png","/static/assets/legacy/smoke/Smoke9.png","/static/assets/legacy/sprites/chicken_eating_38x32.png","/static/assets/legacy/sprites/chicken_feathers_16x16.png","/static/assets/legacy/sprites/dead_chicken_32x32.png","/static/assets/legacy/sprites/player_16x16.png","/static/assets/legacy/sprites/stars_16x16.png","/static/assets/legacy/stone1.png","/static/assets/legacy/stone2.png","/static/assets/legacy/stone3.png","/static/assets/legacy/stone4.png","/static/assets/legacy/sword_on_table.png","/static/assets/legacy/test.png","/static/assets/legacy/tree.png","/static/assets/legacy/woman_32x32.png","/static/assets/legacy/wood_house.png","/static/assets/nice.png","/static/assets/pokemon.png","/static/assets/temp-aseprite/WindyTree.aseprite","/static/assets/temp-aseprite/arrowDown.aseprite","/static/assets/temp-aseprite/barn.aseprite","/static/assets/temp-aseprite/bed.aseprite","/static/assets/temp-aseprite/blob.aseprite","/static/assets/temp-aseprite/bookshelf.aseprite","/static/assets/temp-aseprite/box.aseprite","/static/assets/temp-aseprite/chicken.aseprite","/static/assets/temp-aseprite/chickenBox.aseprite","/static/assets/temp-aseprite/chickenEating.aseprite","/static/assets/temp-aseprite/deadChicken.aseprite","/static/assets/temp-aseprite/dragon_room.aseprite","/static/assets/temp-aseprite/farmerCarrying.aseprite","/static/assets/temp-aseprite/farmerCloseup.aseprite","/static/assets/temp-aseprite/farmerIdle.aseprite","/static/assets/temp-aseprite/farmerShooting.aseprite","/static/assets/temp-aseprite/fire.aseprite","/static/assets/temp-aseprite/flower.aseprite","/static/assets/temp-aseprite/goat.aseprite","/static/assets/temp-aseprite/grass.aseprite","/static/assets/temp-aseprite/ground_32x32.aseprite","/static/assets/temp-aseprite/killingMachine.aseprite","/static/assets/temp-aseprite/logo.aseprite","/static/assets/temp-aseprite/new_player.aseprite","/static/assets/temp-aseprite/niceBlob.aseprite","/static/assets/temp-aseprite/nice_blob.aseprite","/static/assets/temp-aseprite/nn.aseprite","/static/assets/temp-aseprite/player/player.aseprite","/static/assets/temp-aseprite/player/viking.aseprite","/static/assets/temp-aseprite/prettyGirl.aseprite","/static/assets/temp-aseprite/tree.aseprite","/static/assets/temp-aseprite/uglyGir.aseprite","/static/assets/temp-aseprite/wood_house.aseprite","/static/assets/temp-aseprite/world.aseprite","/static/audio/click.mp3","/static/audio/nyaSheet.mp3","/static/audio/placeDirt.mp3","/static/audio/project Project/Ableton Project Info/AProject.ico","/static/audio/project Project/Backup/project [2025-08-11 120859].als","/static/audio/project Project/Backup/project [2025-08-11 150705].als","/static/audio/project Project/Backup/project [2025-08-12 102436].als","/static/audio/project Project/Backup/project [2025-08-15 113900].als","/static/audio/project Project/Desktop.ini","/static/audio/project Project/project.als","/static/audio/sheet.mp3","/static/engine/Calculate.js","/static/engine/DeltaTime.js","/static/engine/Distance.js","/static/engine/Draw.js","/static/engine/G.js","/static/engine/Hp.js","/static/engine/InfiniteListLooper.js","/static/engine/Init.js","/static/engine/Iterate.js","/static/engine/Level.js","/static/engine/ListLooper.js","/static/engine/Loop.js","/static/engine/MinCap.js","/static/engine/PictureInPicture.js","/static/engine/Random.js","/static/engine/Sleep.js","/static/engine/SpinningAroundPosition.js","/static/engine/StopWatch.js","/static/engine/Thread.js","/static/engine/Wait.js","/static/engine/animation/Bounce.js","/static/engine/animation/Curve.js","/static/engine/animation/Easing.js","/static/engine/animation/Easings.js","/static/engine/animation/ExponentialNumber.js","/static/engine/animation/InverseExponentialNumber.js","/static/engine/animation/Motion.js","/static/engine/animation/Normalize.js","/static/engine/animation/PingPong.js","/static/engine/animation/Sine.js","/static/engine/animation/XMotion.js","/static/engine/aseprite/AsepriteJson.js","/static/engine/aseprite/AsepriteLayerJson.js","/static/engine/assertions/AnArray.js","/static/engine/assertions/AssertArray.js","/static/engine/assertions/AssertNoNullInArray.js","/static/engine/assertions/AssertNotNull.js","/static/engine/assertions/NotArray.js","/static/engine/assertions/a.js","/static/engine/assertions/dilemma_about_naming_convention.md","/static/engine/assertions/not.js","/static/engine/audio/AudioContext.js","/static/engine/audio/AudioEngine.js","/static/engine/audio/AudioSheet.js","/static/engine/audio/Sound.js","/static/engine/camera/Anchor.js","/static/engine/camera/Camera.js","/static/engine/camera/LowLevelCamera.js","/static/engine/canvas/CanvasRenderer.js","/static/engine/controller/Controller.js","/static/engine/controller/Mouse.js","/static/engine/controller/keyboard/Keyboard.js","/static/engine/controller/mouse/ClickEvents.js","/static/engine/enhance/Enhance.js","/static/engine/enhance/Enhance_html.js","/static/engine/enhance/Enhance_js_Array.js","/static/engine/graphics/HeightMap.js","/static/engine/graphics/Noise.js","/static/engine/graphics/Parallax.js","/static/engine/graphics/ParallaxTest.js","/static/engine/graphics/Particle.js","/static/engine/graphics/SimplexNoise.js","/static/engine/graphics/SpinningPicture.js","/static/engine/graphics/Square.js","/static/engine/graphics/grid/GrassGrid.js","/static/engine/graphics/grid/Grid.js","/static/engine/graphics/grid/GridPositions.js","/static/engine/graphics/grid/HouseGrid.js","/static/engine/graphics/particles/Splash.js","/static/engine/graphics/particles/Water.js","/static/engine/graphics/sprite/Sprite.js","/static/engine/graphics/sprite/SpriteLayers.js","/static/engine/graphics/sprite/temp","/static/engine/html/Flex.js","/static/engine/html/Html.js","/static/engine/html/HtmlElement.js","/static/engine/html/HtmlProgressBar.js","/static/engine/html/HtmlVideo.js","/static/engine/html/MovableElement.js","/static/engine/local_objects/Update.js","/static/engine/logging/ShowLogs.js","/static/engine/mechanics/Blur.js","/static/engine/mechanics/Charge.js","/static/engine/mechanics/FollowPlayerNoise.js","/static/engine/mechanics/GridPathFinder.js","/static/engine/mechanics/LinePathFinder.js","/static/engine/mechanics/PathFinder.js","/static/engine/mechanics/Rain.js","/static/engine/mechanics/StraightPath.js","/static/engine/mechanics/dialogue/BackspaceEffect.js","/static/engine/mechanics/dialogue/Dialogue.js","/static/engine/mechanics/dialogue/MultiTextTyper.js","/static/engine/mechanics/dialogue/TextTyper.js","/static/engine/mechanics/dialogue/TextTyperWithBackspaceEffect.js","/static/engine/mechanics/invisible_walls/InvisibleWalls.js","/static/engine/mechanics/invisible_walls/WalkableAreas.js","/static/engine/mechanics/quest/Quest.js","/static/engine/mechanics/quest/QuestList.js","/static/engine/mechanics/quest/Task.js","/static/engine/multiplayer/socket/OnlineObjects.js","/static/engine/multiplayer/socket/OnlinePlayers.js","/static/engine/multiplayer/socket/SocketClient.js","/static/engine/multiplayer/socket/VideoCall.js","/static/engine/npc/Path.js","/static/engine/objects/AllObjects.js","/static/engine/objects/DynamicGameObject.js","/static/engine/objects/HelperThing.js","/static/engine/objects/LocalObjects.js","/static/engine/objects/Registry.js","/static/engine/objects/StaticGameObject.js","/static/engine/objects/Velocity.js","/static/engine/objects/_GameObject.js","/static/engine/on/After.js","/static/engine/on/DoWhile.js","/static/engine/on/Every.js","/static/engine/on/EveryFrame.js","/static/engine/on/IsFrame.js","/static/engine/on/OnChange.js","/static/engine/on/OnTrue.js","/static/engine/os/AudioDb.js","/static/engine/os/Base64.js","/static/engine/os/Db.js","/static/engine/os/Microphone.js","/static/engine/palette/Palette.js","/static/engine/physics/Collision.js","/static/engine/physics/ForcePush.js","/static/engine/physics/Move.js","/static/engine/physics/Physics.js","/static/engine/physics/Push.js","/static/engine/position/AnalShit.js","/static/engine/position/CenterPosition.js","/static/engine/position/GuiPosition.js","/static/engine/position/OffsetPosition.js","/static/engine/position/Position.js","/static/engine/position/Positions.js","/static/engine/position/ScreenPosition.js","/static/engine/position/smooth/SmoothPosition.js","/static/engine/position/smooth/SmoothValue.js","/static/engine/start/AsepriteTilesJson.js","/static/engine/start/D1.js","/static/engine/start/HotReload.js","/static/engine/start/LoadAudio.js","/static/engine/start/LoadImage.js","/static/engine/start/LoadJson.js","/static/engine/start/index.js","/static/engine/tools/Call.js","/static/game/Ally.js","/static/game/BottomText.js","/static/game/DeathText.js","/static/game/Link.js","/static/game/Money.js","/static/game/Monster.js","/static/game/MonsterWave.js","/static/game/Npc.js","/static/game/PicturePositions.js","/static/game/Poop.js","/static/game/Scale.js","/static/game/Shake.js","/static/game/Store.js","/static/game/Turret.js","/static/game/TurretNeeds.js","/static/game/Waves.js","/static/game/World.js","/static/game/memory_cards/EditMemories.js","/static/game/memory_cards/Menu.js","/static/game/memory_cards/Practice.js","/static/game/memory_cards/RecordButton.js","/static/game/player/Jump.js","/static/game/player/Player.js","/static/game/tiles/SingleTile.js","/static/game/tiles/TileSheet.js","/static/index.html","/static/ui/css/animations/fade_away.css","/static/ui/css/animations/fade_in.css","/static/ui/css/animations/typing_effect.css","/static/ui/css/styling/button.css","/static/ui/css/styling/death.css","/static/ui/css/styling/dialog.css","/static/ui/css/styling/div.css","/static/ui/css/styling/flex.css","/static/ui/css/styling/img.css","/static/ui/css/styling/input.css","/static/ui/css/styling/main.css","/static/ui/css/styling/overlay.css","/static/ui/css/styling/progress_bar.css","/static/ui/css/styling/right_click_menu.css","/static/ui/css/styling/scrollbar.css","/static/ui/css/styling/slider.css","/static/ui/css/styling/text.css","/static/ui/css/styling/ui.css","/static/ui/css/styling/video.css","/static/ui/css/styling/videocall.css"]]) {

				try {
					await cache.add(url)
				}
				catch (e) {
					console.error('Failed to cache', url, e)
				}

				try {
					await cache.add('https://romskip.netlify.app' + url)
				}
				catch (e) {
					console.error('Failed to cache', url, e)
				}
			}
		})
	)
})

self.addEventListener('activate', e => {
	e.waitUntil(caches.keys().then(keys => Promise.all(keys.filter(key => key !== CACHE_NAME).map(key => caches.delete(key)))))
})

self.addEventListener('fetch', e => {
    e.respondWith(
        caches.match(e.request)
            .then(response => response || fetch(e.request))
            .catch(err => {
                console.error('Fetch handler error:', err);
                return fetch(e.request);
            })
    );
});

